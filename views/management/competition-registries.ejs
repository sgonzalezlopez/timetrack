<link rel="stylesheet" href="/bootstrap-table/bootstrap-table.min.css">
<div class="card">
	<div class="card-body">
		<h5 class="card-title"><button type="button" class="btn btn-warning" onclick="window.location.assign(window.location.href.replace('/registries', ''))"><i class="fa-solid fa-backward"></i></button> <span><%=object.name%></span></h5>
		<div class="table-responsive">
			<table id="table" data-detail-view="true" data-detail-view-icon="true" data-detail-formatter="registryDetailFormatter" data-toggle="table" data-sortable="true" data-url="/api/competition/<%=locals.object._id%>/registries" class="table table-striped table-bordered clickable" detail-url="/management/registry/">
				<thead>
					<tr>
						<th data-field="date" data-formatter="core.formatters.date" data-sortable="true">
							<%= __('COL_startDate') %>
						</th>
						<th data-field="skater.fullname" data-sortable="true">
							<%= __('COL_skater') %>
						</th>
						<th data-field="club.name" data-sortable="true">
							<%= __('COL_club') %>
						</th>
						<th data-field="category" data-sortable="true">
							<%= __('COL_category') %>
						</th>
						<th data-field="race" data-sortable="true">
							<%= __('COL_race') %>
						</th>
						<th data-field="distance" data-sortable="true">
							<%= __('COL_distance') %>
						</th>
						<th data-field="rail" data-sortable="true" data-visible="false">
							<%= __('COL_rail') %>
						</th>
						<th data-field="starting" data-sortable="true" data-visible="false">
							<%= __('COL_starting') %>
						</th>
						<th data-field="trainingHeat" data-sortable="true" data-visible="false">
							<%= __('COL_trainingHeat') %>
						</th>
						<th data-field="trainingPercentage" data-sortable="true" data-visible="false">
							<%= __('COL_trainingPercentage') %>
						</th>
						<th data-field="times" data-sortable="true"  data-width="100" data-formatter="formatterMillisecondsArray" data-visible="false">
							<%= __('COL_partialTimes') %>
						</th>
						<th data-field="totalTime" data-sortable="true" data-formatter="core.formatters.milliseconds">
							<%= __('COL_totalTime') %>
						</th>
						<th data-field="speed" data-formatter="core.formatters.speed" data-sortable="true"><%= __('COL_speed') %></th>
						<th data-field="id" data-formatter="actionFormatter" data-align="center" data-events="actionEvents">
							<%= __('COL_actions') %>
						</th>
					</tr>
				</thead>
			</table>
		</div>
	</div>
</div>

<script>
	function actionFormatter(value, row, index) {
		return [
			'<a class="view" href="/management/registry/' + row._id + '" title="">',
			'<i class="fa fa-eye"></i>',
			"</a> ",
			'<%-permissions.includes("D") ? `<a class="delete" href="javascript:void(0)" title=""><i class="fa fa-trash"></i></a>`: ``%>'
		].join("");
	}
</script>